= Integrate a local MIcrofrontend
:idprefix:
:idseparator: -
:imagesdir: ../../../images


This approach enables hot-reloading of your local micro-frontend: changes you make there are automatically visible in OneCX after the rebuild. The best way for fast frontend development.

== Start your local Microfrontend

Start the Microfrontend with following command, depending on which Angular setup you are working:

.Start Angular *ng* Microfrontend on port 6021
[source,bash]
----
npm run start -- --port 6021 --host 0.0.0.0 --disable-host-check --public-host=http://localhost:6021
----

.Start Angular *nx* Microfrontend on port 6021
[source,bash]
----
npm run start -- --port=6021 --host 0.0.0.0 --disableHostCheck --publicHost=http://localhost:6021
----

CheckPoint::
Please check the microfrontend is up and running by accessing the *public host URL* (see start command) in Browser. The *remoteEntry.js* should be loaded.

.Local running Microfrontend
image::screenshot_successful-start-local-mfe.png[]


== Integrate the local Microfrontend into OneCX

The integration can be easily accomplished through routing and path rewriting by xref:./../utilities.adoc#traefik[Traefik]. This is necessary because the Docker Compose project's network for OneCX is isolated from the outside world. And the meaning of "localhost" within the OneCX network (Docker uses "host.docker.internal" internally) differs from "localhost" outside of it. Therefore, requests from the Docker environment must be routed to the outside world and mapped to the localhost address.

This step is done with the script *toggle-mfes.sh*. It creates a configuration file with routing and path rewrite instructions that are read by Traefik. See also the documentation for xref:./../scripts/toggle-mfes.sh[toggle-mfes.sh].

.Command for Integration local app running on http://localhost:6021
----
  ./toggle-mfes.sh -a my-app:6021
----

[TIP]
If the microfrontend requires its own backend functionality, then these backend services must also be started and presumably integrated into OneCX. The *./toggle-mfes.sh* script does not check this.

